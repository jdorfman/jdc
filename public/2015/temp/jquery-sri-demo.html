
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Modal</title>
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/hint.css/2.0.0/hint.min.css" rel="stylesheet">

		<!-- Modal CSS -->
		<style>
			/* General modal style */
			.modal-overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: 10000;
				background-color: #000;
				opacity: 0;
			}

			.modal {
				position: relative;
				top: -400px;
				width: 830px;
				margin: 0 auto;
				background-color: #fff;
				z-index: 10100;
				box-shadow: 2px 4px 8px 0 rgba(0, 0, 0, .5);
			}

			.modal-header {
				text-align: center;
				padding: 20px 10px;
			}

			.modal-title {
				margin: 0;
			}

			.modal-close {
				position: absolute;
				top: 20px;
				right: 30px;
				color: #ccc;
				cursor: pointer;
			}

			/* SRI modal specific */
			.sri-modal-link {
				width: 810px;
				word-wrap: break-word;
				word-break: break-all;
				display: inline-block;
				background-color: #f8fbfb;
				padding: 0 10px;
				position: relative;
			}

			.sri-modal-link code {
				width: 765px;
				display: inline-block;
				white-space: pre-line;
				background-color: transparent;
				padding: 0;
				font-size: 13px;
				line-height: 16px;
			}

			.sri-modal-copy-btn {
				background-color: #1c6db3;
				color: #fff;
				border: none;
				font-size: 1rem;
				width: 35px;
				height: 35px;
				cursor: pointer;
				position: absolute;
				top: 5px;
			}

			.sri-modal-info {
				padding: 15px;
			}

			/* Just to make it prettier */
			.modal-title {
				font-family: "klavika-web", "Helvetica Neue", Helvetica, Arial, Geneva, sans-serif !important;
				font-weight: 400;
			}

			.modal-body {
				font: 15px/22px "Helvetica Neue", HelveticaNeue, Helvetica, Arial, sans-serif;
			}

			a {
				color: #b24926;
			}

			code {
				font-family: "source-code-pro", Consolas, monospace !important;
				word-spacing: 0;
				padding: 0 3px;
				background-color: #e6e6e6;
				border-radius: 3px;
				white-space: pre-wrap;
				word-wrap: break-word;
			}
		</style>
	</head>

	<body>
		<a class="open-sri-modal" href="https://code.jquery.com/jquery-2.2.0.min.js" data-hash="sha256-ihAoc6M/JPfrIiIeayPE9xjin4UWjsx2mjW/rtmxLM4=">Show modal</a>

		<!-- Modal header template -->
		<script type="text/html" id="sri-modal-header">
			<h3 class="modal-title">Copy Below</h3>
		</script>

		<!-- Modal body template -->
		<script type="text/html" id="sri-modal-body">
			<div class="sri-modal-link">
				<code>&lt;script src="{{link}}"
					integrity="{{hash}}"
					crossorigin="anonymous"&gt;&lt;/script&gt;</code>

				<button class="sri-modal-copy-btn hint--top hint-rounded hint--no-animate" data-clipboard-text='&lt;script src="{{link}}" integrity="{{hash}}" crossorigin="anonymous"&gt;&lt;/script&gt;'>
					<i class="fa fa-copy"></i>
				</button>
			</div>

			<div class="sri-modal-info">
				If you are wondering what <code>integrity</code> attribute is all about les us
				explain. Subresource Integrity or SRI is a new <a href="https://www.w3.org/TR/SRI/">
				W3C specification</a> that allows web developers to ensure that resources hosted on
				third-party servers like code.jquery.com have not been tampered with. Use of SRI is
				recommended as a best-practice, whenever libraries are loaded from a third-party
				source.<br>
				Read more at <a href="https://www.srihash.org/">srihash.org</a>
			</div>
		</script>

		<!-- jQuery and clipboard.js -->
		<script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
		<script src="https://cdn.jsdelivr.net/clipboard.js/1.5.5/clipboard.min.js"></script>

		<script>
			// Modal
			function Modal ( header, body ) {
				this.$el = $( "<div class='modal'></div>" );
				this.$overlay = $( "<div class='modal-overlay'></div>" );
				this.$header = $( "<div class='modal-header'></div>" ).html( header ).appendTo( this.$el );
				this.$body = $( "<div class='modal-body'></div>" ).html( body ).appendTo( this.$el );
				this.$closeBtn = $( "<span class='modal-close'><i class='fa fa-close'></i></span>" )
					.appendTo( this.$header );
			}

			Modal.prototype.hide = function() {
				this.$overlay.animate( { opacity: 0 }, function() {
					this.$overlay.remove();
				}.bind( this ) );

				this.$el.animate( { top: -400 }, function() {
					this.$el.remove();
				}.bind( this ) );
			};

			Modal.prototype.show = function() {
				this.$el.add( this.$overlay ).appendTo( "body" );

				this.$overlay.add( this.$closeBtn ).on( "click", function() {
					this.hide();
				}.bind( this ) );

				this.$el.animate( { top: 200 } );
				this.$overlay.animate( { opacity: .5 } );
			};

			// Store modal templates
			var title = $( "#sri-modal-header" ).html(),
				body = $( "#sri-modal-body" ).html(),
				clipboard;

			// Show modal on click
			$( "body" ).on( "click", ".open-sri-modal", function() {
				new Modal( title, replace( body, {
					link: $( this ).attr( "href" ),
					hash: $( this ).attr( "data-hash" )
				} ) ).show();

				return false;
			} );

			// Helper functions
			function replace ( string, values ) {
				$.each( values, function( key, value ) {
					string = string.replace( new RegExp( "\\{\\{" + key + "}}", "g" ), value );
				} );

				return string;
			}

			clipboard = new Clipboard( "[data-clipboard-text]" );

			clipboard.on( "success", function( e ) {
				$( e.trigger ).attr( "data-hint", "Copied!").on( "mouseout", function() {
					$( this ).removeAttr( "data-hint" );
				} );
			} );

			clipboard.on( "error", function( e ) {
				$( e.trigger ).attr( "data-hint", "Press Ctrl+C to copy!").on( "mouseout", function() {
					$( this ).removeAttr( "data-hint" );
				} );
			} );
		</script>
	</body>
</html>
